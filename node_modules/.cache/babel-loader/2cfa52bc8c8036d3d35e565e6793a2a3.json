{"ast":null,"code":"import { frameSum, isStrike, isSpare, bonusForStrike, bonusForSpare } from './HelperFunctions';\n\nclass BowlingGame {\n  constructor() {\n    this.rollingBall = pinsDown => this.rolls[this.currentRoll++] = pinsDown;\n\n    this.standingPins = () => {\n      const bowlingScore = this.calcScore();\n      let stillStanding = this.maxScore;\n      bowlingScore.forEach(score => {\n        if (score.pinsStillStanding !== null && !isNaN(score.pinsStillStanding)) {\n          stillStanding = score.pinsStillStanding;\n        }\n      });\n      return stillStanding;\n    };\n\n    this.restartGame = () => {\n      this.rolls = [];\n      this.currentRoll = 0;\n    };\n\n    this.calcScore = () => {\n      let bowlingScore = [];\n      let score = 0;\n      let frameIndex = 0;\n\n      const firstRoll = () => this.rolls[frameIndex];\n\n      const secondRoll = () => this.rolls[frameIndex + 1];\n\n      const finalRoll = () => this.rolls[frameIndex + 2];\n\n      const saveFrame = (bowlingScore, firstRollBox, secondRollBox, score, pinsStillStanding) => {\n        if (bowlingScore.length < 9) {\n          bowlingScore.push({\n            firstRollBox,\n            secondRollBox,\n            cumulativeScore: score,\n            pinsStillStanding\n          });\n        } else {\n          const scoreBoardBox1 = firstRoll() === this.maxScore ? \"X\" : firstRoll();\n          const scoreBoardBox2 = secondRoll() === this.maxScore ? \"X\" : isSpare() ? \"/\" : secondRoll();\n          let scoreBoardExtraBox;\n\n          if (finalRoll() === this.maxScore) {\n            scoreBoardExtraBox = \"X\";\n          } else if (firstRoll() === this.maxScore || firstRoll() + secondRoll() === this.maxScore) {\n            scoreBoardExtraBox = finalRoll();\n          } else {\n            scoreBoardExtraBox = \"\";\n          }\n\n          bowlingScore.push({\n            firstRollBox: scoreBoardBox1,\n            secondRollBox: scoreBoardBox2,\n            cumulativeScore: score,\n            pinsStillStanding,\n            finalRollBox: scoreBoardExtraBox,\n            gameover: isNaN(score) ? false : true\n          });\n        }\n      };\n\n      [...Array(this.maxScore)].forEach((_, frame) => {\n        if (isStrike(firstRoll())) {\n          score += this.maxScore + bonusForStrike(secondRoll(), finalRoll());\n          saveFrame(bowlingScore, \"\", \"X\", score, this.maxScore);\n          frameIndex++;\n        } else if (isSpare(firstRoll(), secondRoll())) {\n          score += this.maxScore + bonusForSpare(finalRoll());\n          saveFrame(bowlingScore, firstRoll(), \"/\", score, this.maxScore);\n          frameIndex += 2;\n        } else {\n          score += frameSum(firstRoll(), secondRoll());\n          const pinsUp = secondRoll() !== undefined ? this.maxScore : this.maxScore - firstRoll();\n          saveFrame(bowlingScore, firstRoll(), secondRoll(), score, pinsUp);\n          frameIndex += 2;\n        }\n      });\n      return bowlingScore;\n    };\n\n    this.rolls = [];\n    this.currentRoll = 0;\n    this.maxScore = 10;\n  }\n\n}\n\nBowlingGame.createNewBowlingGame = () => new BowlingGame();\n\nexport default BowlingGame;","map":{"version":3,"sources":["/Users/mattginsberg/Desktop/bowling-app/src/components/BowlingGame.js"],"names":["frameSum","isStrike","isSpare","bonusForStrike","bonusForSpare","BowlingGame","constructor","rollingBall","pinsDown","rolls","currentRoll","standingPins","bowlingScore","calcScore","stillStanding","maxScore","forEach","score","pinsStillStanding","isNaN","restartGame","frameIndex","firstRoll","secondRoll","finalRoll","saveFrame","firstRollBox","secondRollBox","length","push","cumulativeScore","scoreBoardBox1","scoreBoardBox2","scoreBoardExtraBox","finalRollBox","gameover","Array","_","frame","pinsUp","undefined","createNewBowlingGame"],"mappings":"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","sourcesContent":["import { frameSum, isStrike, isSpare, bonusForStrike, bonusForSpare} from './HelperFunctions';\n\nclass BowlingGame {\n  constructor() {\n    this.rolls = [];\n    this.currentRoll = 0;\n    this.maxScore = 10;\n  }\n\n  static createNewBowlingGame = () => new BowlingGame();\n\n  rollingBall = pinsDown => (this.rolls[this.currentRoll++] = pinsDown);\n\n  standingPins = () => {\n    const bowlingScore = this.calcScore();\n    let stillStanding = this.maxScore;\n    bowlingScore.forEach(score => {\n      if (score.pinsStillStanding !== null && !isNaN(score.pinsStillStanding)) {\n        stillStanding = score.pinsStillStanding;\n      }\n    });\n    return stillStanding;\n  };\n\n  /*\n    If we click on reset game, reset everything.\n  */\n  restartGame = () => {\n    this.rolls = [];\n    this.currentRoll = 0;\n  };\n\n  calcScore = () => {\n    let bowlingScore = [];\n    let score = 0;\n    let frameIndex = 0;\n\n    const firstRoll = () => this.rolls[frameIndex];\n    const secondRoll = () => this.rolls[frameIndex + 1];\n    const finalRoll = () => this.rolls[frameIndex + 2];\n\n    const saveFrame = (bowlingScore, firstRollBox, secondRollBox, score, pinsStillStanding) => {\n      if (bowlingScore.length < 9) {\n        bowlingScore.push({\n          firstRollBox,\n          secondRollBox,\n          cumulativeScore: score,\n          pinsStillStanding\n        });\n      } else {\n        const scoreBoardBox1 = firstRoll() === this.maxScore ? \"X\" : firstRoll();\n        const scoreBoardBox2 = secondRoll() === this.maxScore ? \"X\" : isSpare() ? \"/\" : secondRoll();\n        let scoreBoardExtraBox;\n        if (finalRoll() === this.maxScore) {\n          scoreBoardExtraBox = \"X\";\n        } else if (firstRoll() === this.maxScore || firstRoll() + secondRoll() === this.maxScore) {\n          scoreBoardExtraBox = finalRoll();\n        } else {\n          scoreBoardExtraBox = \"\";\n        }\n\n        bowlingScore.push({\n          firstRollBox: scoreBoardBox1,\n          secondRollBox: scoreBoardBox2,\n          cumulativeScore: score,\n          pinsStillStanding,\n          finalRollBox: scoreBoardExtraBox,\n          gameover: isNaN(score) ? false : true\n        });\n      }\n    };\n\n    [...Array(this.maxScore)].forEach((_, frame) => {\n      if (isStrike(firstRoll())) {\n        score += this.maxScore + bonusForStrike(secondRoll(), finalRoll());\n        saveFrame(bowlingScore, \"\", \"X\", score, this.maxScore);\n        frameIndex++;\n      } else if (isSpare(firstRoll(), secondRoll())) {\n        score += this.maxScore + bonusForSpare(finalRoll());\n        saveFrame(bowlingScore, firstRoll(), \"/\", score, this.maxScore);\n        frameIndex += 2;\n      } else {\n        score += frameSum(firstRoll(), secondRoll());\n        const pinsUp = secondRoll() !== undefined ? this.maxScore : this.maxScore - firstRoll();\n        saveFrame(bowlingScore, firstRoll(), secondRoll(), score, pinsUp);\n        frameIndex += 2;\n      }\n    });\n\n    return bowlingScore;\n  };\n}\n\nexport default BowlingGame;\n"]},"metadata":{},"sourceType":"module"}