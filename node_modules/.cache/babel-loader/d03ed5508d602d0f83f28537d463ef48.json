{"ast":null,"code":"class BowlingGame {\n  constructor() {\n    this.roll = pins => this.rolls[this.currentRole++] = pins;\n\n    this.reset = () => {\n      this.rolls = [];\n      this.currentRole = 0;\n    };\n\n    this.standingPins = () => {\n      const scoreData = this.score();\n      let standingPins = 10;\n      scoreData.forEach(o => {\n        if (o.standingPins !== null && !isNaN(o.standingPins)) {\n          standingPins = o.standingPins;\n        }\n      });\n      return standingPins;\n    };\n\n    this.score = () => {\n      let scoreData = [];\n      let score = 0;\n      let frameIndex = 0;\n\n      const roll1 = () => this.rolls[frameIndex];\n\n      const roll2 = () => this.rolls[frameIndex + 1];\n\n      const roll3 = () => this.rolls[frameIndex + 2];\n\n      const saveFrame = (scoreData, leftBox, rightBox, score, standingPins) => {\n        if (scoreData.length < 9) {\n          scoreData.push({\n            leftBox,\n            rightBox,\n            cumulativeScore: score,\n            standingPins\n          });\n        } else {\n          const box1 = bowlType(roll1, roll2, roll3) === 'strike' ? \"X\" : roll1();\n          const box2 = roll2() === 10 ? \"X\" : isSpare() ? \"/\" : roll2();\n          let box3;\n\n          if (roll3() === 10) {\n            box3 = \"X\";\n          } else if (roll1() === 10 || roll1() + roll2() === 10) {\n            box3 = roll3();\n          } else {\n            box3 = \"\";\n          }\n\n          scoreData.push({\n            leftBox: box1,\n            rightBox: box2,\n            cumulativeScore: score,\n            standingPins,\n            extraBox: box3\n          });\n        }\n      };\n\n      [...Array(10)].forEach((_, frame) => {\n        switch (bowlType(roll1, roll2, roll3)) {\n          case 'strike':\n            score += 10 + roll2() + roll3();\n            saveFrame(scoreData, \"\", \"X\", score, 10);\n            frameIndex++;\n            break;\n\n          case 'spare':\n            score += 10 + roll3();\n            saveFrame(scoreData, roll1(), \"/\", score, 10);\n            frameIndex += 2;\n            break;\n\n          default:\n            score += roll1() + roll2();\n            const standingPins = roll2() !== undefined ? 10 : 10 - roll1();\n            saveFrame(scoreData, roll1(), roll2(), score, standingPins);\n            frameIndex += 2;\n            break;\n        }\n      });\n      return scoreData;\n    };\n\n    this.rolls = [];\n    this.currentRole = 0;\n  }\n\n  bowlType(roll1, roll2, roll3) {\n    let type;\n\n    if (roll1 === 10) {\n      type = 'strike';\n    }\n\n    if (roll1 + roll2 === 10) {\n      type = 'spare';\n    }\n\n    return type;\n  }\n\n}\n\nBowlingGame.create = () => new BowlingGame();\n\nexport default BowlingGame;","map":{"version":3,"sources":["/Users/mattginsberg/Desktop/bowling-app/src/components/BowlingGame.js"],"names":["BowlingGame","constructor","roll","pins","rolls","currentRole","reset","standingPins","scoreData","score","forEach","o","isNaN","frameIndex","roll1","roll2","roll3","saveFrame","leftBox","rightBox","length","push","cumulativeScore","box1","bowlType","box2","isSpare","box3","extraBox","Array","_","frame","undefined","type","create"],"mappings":"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","sourcesContent":["class BowlingGame {\n  constructor() {\n    this.rolls = [];\n    this.currentRole = 0;\n  }\n\n  static create = () => new BowlingGame();\n\n  roll = pins => (this.rolls[this.currentRole++] = pins);\n\n  reset = () => {\n    this.rolls = [];\n    this.currentRole = 0;\n  };\n\n  standingPins = () => {\n    const scoreData = this.score();\n    let standingPins = 10;\n    scoreData.forEach(o => {\n      if (o.standingPins !== null && !isNaN(o.standingPins)) {\n        standingPins = o.standingPins;\n      }\n    });\n    return standingPins;\n  };\n\n  bowlType(roll1, roll2, roll3) {\n    let type;\n\n    if (roll1 === 10) {\n      type = 'strike';\n    }\n    if ((roll1 + roll2) === 10) {\n      type = 'spare';\n    }\n\n    return type;\n\n  }\n  score = () => {\n    let scoreData = [];\n    let score = 0;\n    let frameIndex = 0;\n\n    const roll1 = () => this.rolls[frameIndex];\n    const roll2 = () => this.rolls[frameIndex + 1];\n    const roll3 = () => this.rolls[frameIndex + 2];\n\n    const saveFrame = (scoreData, leftBox, rightBox, score, standingPins) => {\n      if (scoreData.length < 9) {\n        scoreData.push({\n          leftBox,\n          rightBox,\n          cumulativeScore: score,\n          standingPins\n        });\n      } else {\n        const box1 = bowlType(roll1, roll2, roll3) === 'strike' ? \"X\" : roll1();\n        const box2 = roll2() === 10 ? \"X\" : isSpare() ? \"/\" : roll2();\n        let box3;\n        if (roll3() === 10) {\n          box3 = \"X\";\n        } else if (roll1() === 10 || roll1() + roll2() === 10) {\n          box3 = roll3();\n        } else {\n          box3 = \"\";\n        }\n\n        scoreData.push({\n          leftBox: box1,\n          rightBox: box2,\n          cumulativeScore: score,\n          standingPins,\n          extraBox: box3\n        });\n      }\n    };\n\n    [...Array(10)].forEach((_, frame) => {\n      switch (bowlType(roll1, roll2, roll3)) {\n        case 'strike':\n         score += 10 + roll2() + roll3();\n         saveFrame(scoreData, \"\", \"X\", score, 10);\n         frameIndex++;\n          break;\n        case 'spare':\n          score += 10 + roll3();\n          saveFrame(scoreData, roll1(), \"/\", score, 10);\n          frameIndex += 2;\n          break;\n        default:\n          score += roll1() + roll2();\n          const standingPins = roll2() !== undefined ? 10 : 10 - roll1();\n          saveFrame(scoreData, roll1(), roll2(), score, standingPins);\n          frameIndex += 2;\n          break;\n      }\n    });\n\n    return scoreData;\n  };\n}\n\nexport default BowlingGame;\n"]},"metadata":{},"sourceType":"module"}